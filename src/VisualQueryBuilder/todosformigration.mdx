Loki: 
In OperationEditor.tsx isConflictingFilter was removed and data source needs to implement it and pass it to OperationList.tsx
function isConflictingFilter(
  operation: QueryBuilderOperation,
  queryOperations: QueryBuilderOperation[]
): boolean {
  const operationIsNegative = operation.params[1].toString().startsWith('!');

  const candidates = queryOperations.filter(
    (queryOperation) =>
      queryOperation.id === LokiOperationId.LabelFilter &&
      queryOperation.params[0] === operation.params[0] &&
      queryOperation.params[2] === operation.params[2]
  );

  const conflict = candidates.some((candidate) => {
    if (operationIsNegative && candidate.params[1].toString().startsWith('!') === false) {
      return true;
    }
    if (operationIsNegative === false && candidate.params[1].toString().startsWith('!')) {
      return true;
    }
    return false;
  });

  return conflict;
}

Loki/Prom: 

In QueryBuilderHints, 
  buildDataQueryFromQueryString: (queryString: string) => Q;
  buildQueryStringFromDataQuery: (dataQuery: Q) => string;
needs to be added. This can be done trough ds.modifyQuery API

